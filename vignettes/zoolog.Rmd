---
title: "Package ***zoolog***:  \n zooarcheological analysis with log-ratios."
author: "Jose M Pozo, Silvia Valenzuela-Lamas, Angela Trentacoste, Ariadna Nieto-Espinet, and Silvia GuimarÃ£es Chiarelli"
email: "svalenzuela@imf.csic.es"
date: "`r format(Sys.Date())`"
bibliography: zoolog.bib
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{zoolog}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# Introduction

The package *zoolog* includes functions and referencial data to generate and 
handle log-ratios from typical measurements of zooarcheological bone samples 
relative to standard reference values [@von1976guide], [@davis1992rapid].
The methods included in the package were initially developed for the paper 
[@trentacoste2018pre].

In general zooarcheological datasets are constituted by bone remains of many 
different anatomical body parts. Measurements of length or width of different 
anatomical elements cannot be directly compared or aggregated for statistical 
analysis. This problem can be palliated by extracting the measurement log-ratios 
with respect to a reference. The resulting log-ratios can be compared and 
statistically analysed under general reasonable conditions.


## Installation

You can install the released version of zoolog from [CRAN](https://CRAN.R-project.org) with:

``` r
install.packages("zoolog")
```

And the development version from [GitHub](https://github.com/) with:

``` r
install.packages("devtools")
devtools::install_github("josempozo/zoolog")
```


# Reference

The log-ratios are calculated with respect to a standard reference. The package
*zoolog* includes a reference dataset. However, the user can consider other 
references or the provided reference can be extended and updated integrating
newer research data. Submission of extended/improved references to be openly 
included is encourage (contact the mantainer through the provided email address).

The reference is provided as a dataframe named `referencesLog`. It includes 
reference values for the domestic triad: *bos taurus*, *ovis aries*, and 
*sus domesticus*.


# Examples

This example reads a dataset from a file in csv format and compute the
log-ratios. Then, the cases with no available log-ratios are removed.
Finally, the resulting dataset is saved in a file in csv format.

```{r example}
library(zoolog)
## Set the local path where you have the dataset to be analysed (typically a
## comma-separated value (csv) file). We use here one of the example datasets
## included in the package:
dataFile <- system.file("extdata", "dataValenzuelaLamas2008.csv.gz", 
                        package = "zoolog")
data = read.csv2(dataFile,
                 quote="\"", header=TRUE, na="",
                 fileEncoding="UTF-8")
## Comput the log-ratios.
dataWithLog=LogRatios(data);
## Remove the cases with no log-ratio extracted:
dataWithLogPruned=RemoveNACases(dataWithLog)
## Write the resulting file in the working directory (which the user should 
## have set appropriately)
write.csv2(dataWithLogPruned, "myDataWithLogValues.csv", 
            quote=FALSE, row.names=FALSE, na="", 
            fileEncoding="UTF-8")
```
