<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Condense Measure Log-Ratios — CondenseLogs • zoolog</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Condense Measure Log-Ratios — CondenseLogs" />
<meta property="og:description" content="This function condenses the calculated log ratio values into a reduced number
of features by grouping log ratio values and selecting or calculating a
feature value. By default the selected groups represent each a single dimension,
i.e. Length and Width. Only one feature is extracted per group.
Currently, two methods are possible: priority (default) or average." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">zoolog</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/index.html">***zoolog***:  
 Zooarcheological Analysis with Log-Ratios</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Condense Measure Log-Ratios</h1>
    
    <div class="hidden name"><code>CondenseLogs.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function condenses the calculated log ratio values into a reduced number
of features by grouping log ratio values and selecting or calculating a
feature value. By default the selected groups represent each a single dimension,
i.e. <code>Length</code> and <code>Width</code>. Only one feature is extracted per group.
Currently, two methods are possible: priority (default) or average.</p>
    </div>

    <pre class="usage"><span class='fu'>CondenseLogs</span><span class='op'>(</span>
  <span class='va'>data</span>,
  grouping <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>Length <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"GL"</span>, <span class='st'>"GLl"</span>, <span class='st'>"HTC"</span><span class='op'>)</span>, Width <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Bd"</span>, <span class='st'>"BT"</span>, <span class='st'>"Bp"</span>, <span class='st'>"SD"</span><span class='op'>)</span><span class='op'>)</span>,
  method <span class='op'>=</span> <span class='st'>"priority"</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A dataframe with the input measurements.</p></td>
    </tr>
    <tr>
      <th>grouping</th>
      <td><p>A list of named character vectors. The list includes a vector
per selected group. Each vector gives the group of measurements in order of
priority. By default the groups are <code>Length = c("GL", "GLl", "HTC")</code> and
<code>Width = c("Bd", "BT", "Bp", "SD")</code>. The order is irrelevant for
<code>method = "average"</code>.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>Character string indicating which method to use for extracting
the condensed features. Currently accepted methods: <code>"priority"</code>
(default) and <code>"average"</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A dataframe including the input dataframe and additional columns, one
for each extracted condensed feature, with the corresponding name given in
<code>grouping</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This operation is motivated by two circumstances. First, not all measurements
are available for every bone specimen, which obstructs their direct comparison
and statistical analysis. Second, several measurements can be strongly
correlated (e.g. SD and Bd both represent bone width).
Thus, considering them as independent would
produce an over-representation of bone remains with more measurements per
axis. Condensing each group of measurements into a single feature
(e.g. one measure per axis) palliates both problems.</p>
<p>Observe that an important property of the log-ratios from a reference is that
it makes the different measures comparable. For instance, a bone with
a width doubling the reference will produce the same log-ratio
(<code><a href='https://rdrr.io/r/base/Log.html'>log(2)</a></code>) for Bd, BT, Bp, and SD. In contrast, the
absolute measures are not directly comparable.</p>
<p>The measurement names in the grouping list are given without the
<code>logPrefix</code>. But the selection is made from the log-ratios.</p>
<p>The default method is <code>"priority"</code>, which selects the first available
measure log-ratio in each group. The method <code>"average"</code> extracts the
mean per group, ignoring the non-available measures.
We provide the following by-default group and prioritization:
For lengths, the first option is GL, then HTC.
For widths, the order of priority is: Bd, BT, Bp, SD.
This order maximises the robustness and reliability of the measurements,
as priority is given to the most abundant, more replicable, and less age
dependent measurements.</p>
<p>This method was first used in:
Trentacoste, A., Nieto-Espinet, A., &amp; Valenzuela-Lamas, S. (2018).
Pre-Roman improvements to agricultural production: Evidence from livestock
husbandry in late prehistoric Italy.
PloS one, 13(12), e0208109.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## Read an example dataset:</span>
<span class='va'>dataFile</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata"</span>, <span class='st'>"dataValenzuelaLamas2008.csv.gz"</span>,
                        package<span class='op'>=</span><span class='st'>"zoolog"</span><span class='op'>)</span>
<span class='va'>dataExample</span> <span class='op'>&lt;-</span> <span class='fu'>utils</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.csv2</a></span><span class='op'>(</span><span class='va'>dataFile</span>,
                                quote <span class='op'>=</span> <span class='st'>"\""</span>, na <span class='op'>=</span> <span class='st'>""</span>, header <span class='op'>=</span> <span class='cn'>TRUE</span>,
                                fileEncoding <span class='op'>=</span> <span class='st'>"UTF-8"</span><span class='op'>)</span>
<span class='co'>## Compute the log-ratios:</span>
<span class='va'>dataExampleWithLogs</span> <span class='op'>&lt;-</span> <span class='fu'><a href='LogRatios.html'>LogRatios</a></span><span class='op'>(</span><span class='va'>dataExample</span><span class='op'>)</span>
<span class='co'>## We can observe the first lines (excluding some columns for visibility):</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>dataExampleWithLogs</span><span class='op'>)</span><span class='op'>[</span>, <span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>6</span><span class='op'>:</span><span class='fl'>20</span>,<span class='fl'>32</span><span class='op'>:</span><span class='fl'>63</span><span class='op'>)</span><span class='op'>]</span>
</div><div class='output co'>#&gt;   Site N.inv    UE Especie    Os   GL   Bp   Dp   SD   DD   Bd   Dd BT GLc BFd
#&gt; 1  ALP  3629  8427    avif 1 fal   NA   NA   NA   NA   NA   NA   NA NA  NA  NA
#&gt; 2  ALP  4918 10364    bota 1 fal 54.0 31.3 30.6 28.1 26.3 27.5 20.0 NA  NA  NA
#&gt; 3  ALP  4919 10364    bota 1 fal 54.5 27.9 31.8 26.0 22.8 25.3 19.5 NA  NA  NA
#&gt; 4  ALP  2211  7105    bota 1 fal 47.6 25.2 25.2 20.6 23.7 17.8   NA NA  NA  NA
#&gt; 5  ALP  1257  7093    bota 1 fal 51.1 24.1  2.7 21.5 17.0   NA   NA NA  NA  NA
#&gt; 6  ALP  4693 10258      oc 1 fal 31.0 10.7 12.4   NA  7.4  8.9  8.0 NA  NA  NA
#&gt;   Dl HmandM3 logBd logBFd logBG logBp logBPC logBT logDd logDl logDp logDPA
#&gt; 1 NA      NA    NA     NA    NA    NA     NA    NA    NA    NA    NA     NA
#&gt; 2 NA      NA    NA     NA    NA    NA     NA    NA    NA    NA    NA     NA
#&gt; 3 NA      NA    NA     NA    NA    NA     NA    NA    NA    NA    NA     NA
#&gt; 4 NA      NA    NA     NA    NA    NA     NA    NA    NA    NA    NA     NA
#&gt; 5 NA      NA    NA     NA    NA    NA     NA    NA    NA    NA    NA     NA
#&gt; 6 NA      NA    NA     NA    NA    NA     NA    NA    NA    NA    NA     NA
#&gt;   logGB logGL logGLc logGLP logH logL logLA logLAR logLG logSD logSH logSLC
#&gt; 1    NA    NA     NA     NA   NA   NA    NA     NA    NA    NA    NA     NA
#&gt; 2    NA    NA     NA     NA   NA   NA    NA     NA    NA    NA    NA     NA
#&gt; 3    NA    NA     NA     NA   NA   NA    NA     NA    NA    NA    NA     NA
#&gt; 4    NA    NA     NA     NA   NA   NA    NA     NA    NA    NA    NA     NA
#&gt; 5    NA    NA     NA     NA   NA   NA    NA     NA    NA    NA    NA     NA
#&gt; 6    NA    NA     NA     NA   NA   NA    NA     NA    NA    NA    NA     NA</div><div class='input'>
<span class='co'>## Extract the default condensed features with the default "priority" method:</span>
<span class='va'>dataExampleWithSummary</span> <span class='op'>&lt;-</span> <span class='fu'>CondenseLogs</span><span class='op'>(</span><span class='va'>dataExampleWithLogs</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>dataExampleWithSummary</span><span class='op'>)</span><span class='op'>[</span>, <span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>6</span><span class='op'>:</span><span class='fl'>20</span>,<span class='fl'>32</span><span class='op'>:</span><span class='fl'>63</span><span class='op'>)</span><span class='op'>]</span>
</div><div class='output co'>#&gt;   Site N.inv    UE Especie    Os   GL   Bp   Dp   SD   DD   Bd   Dd BT GLc BFd
#&gt; 1  ALP  3629  8427    avif 1 fal   NA   NA   NA   NA   NA   NA   NA NA  NA  NA
#&gt; 2  ALP  4918 10364    bota 1 fal 54.0 31.3 30.6 28.1 26.3 27.5 20.0 NA  NA  NA
#&gt; 3  ALP  4919 10364    bota 1 fal 54.5 27.9 31.8 26.0 22.8 25.3 19.5 NA  NA  NA
#&gt; 4  ALP  2211  7105    bota 1 fal 47.6 25.2 25.2 20.6 23.7 17.8   NA NA  NA  NA
#&gt; 5  ALP  1257  7093    bota 1 fal 51.1 24.1  2.7 21.5 17.0   NA   NA NA  NA  NA
#&gt; 6  ALP  4693 10258      oc 1 fal 31.0 10.7 12.4   NA  7.4  8.9  8.0 NA  NA  NA
#&gt;   Dl HmandM3 logBd logBFd logBG logBp logBPC logBT logDd logDl logDp logDPA
#&gt; 1 NA      NA    NA     NA    NA    NA     NA    NA    NA    NA    NA     NA
#&gt; 2 NA      NA    NA     NA    NA    NA     NA    NA    NA    NA    NA     NA
#&gt; 3 NA      NA    NA     NA    NA    NA     NA    NA    NA    NA    NA     NA
#&gt; 4 NA      NA    NA     NA    NA    NA     NA    NA    NA    NA    NA     NA
#&gt; 5 NA      NA    NA     NA    NA    NA     NA    NA    NA    NA    NA     NA
#&gt; 6 NA      NA    NA     NA    NA    NA     NA    NA    NA    NA    NA     NA
#&gt;   logGB logGL logGLc logGLP logH logL logLA logLAR logLG logSD logSH logSLC
#&gt; 1    NA    NA     NA     NA   NA   NA    NA     NA    NA    NA    NA     NA
#&gt; 2    NA    NA     NA     NA   NA   NA    NA     NA    NA    NA    NA     NA
#&gt; 3    NA    NA     NA     NA   NA   NA    NA     NA    NA    NA    NA     NA
#&gt; 4    NA    NA     NA     NA   NA   NA    NA     NA    NA    NA    NA     NA
#&gt; 5    NA    NA     NA     NA   NA   NA    NA     NA    NA    NA    NA     NA
#&gt; 6    NA    NA     NA     NA   NA   NA    NA     NA    NA    NA    NA     NA
#&gt;   Length Width
#&gt; 1     NA    NA
#&gt; 2     NA    NA
#&gt; 3     NA    NA
#&gt; 4     NA    NA
#&gt; 5     NA    NA
#&gt; 6     NA    NA</div><div class='input'>
<span class='co'>## Extract only width with "average" method:</span>
<span class='va'>dataExampleWithSummary2</span> <span class='op'>&lt;-</span> <span class='fu'>CondenseLogs</span><span class='op'>(</span><span class='va'>dataExampleWithLogs</span>,
                               grouping <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>Width <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Bd"</span>, <span class='st'>"BT"</span>, <span class='st'>"Bp"</span>, <span class='st'>"SD"</span><span class='op'>)</span><span class='op'>)</span>,
                               method <span class='op'>=</span> <span class='st'>"average"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>dataExampleWithSummary2</span><span class='op'>)</span><span class='op'>[</span>, <span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>6</span><span class='op'>:</span><span class='fl'>20</span>,<span class='fl'>32</span><span class='op'>:</span><span class='fl'>63</span><span class='op'>)</span><span class='op'>]</span>
</div><div class='output co'>#&gt;   Site N.inv    UE Especie    Os   GL   Bp   Dp   SD   DD   Bd   Dd BT GLc BFd
#&gt; 1  ALP  3629  8427    avif 1 fal   NA   NA   NA   NA   NA   NA   NA NA  NA  NA
#&gt; 2  ALP  4918 10364    bota 1 fal 54.0 31.3 30.6 28.1 26.3 27.5 20.0 NA  NA  NA
#&gt; 3  ALP  4919 10364    bota 1 fal 54.5 27.9 31.8 26.0 22.8 25.3 19.5 NA  NA  NA
#&gt; 4  ALP  2211  7105    bota 1 fal 47.6 25.2 25.2 20.6 23.7 17.8   NA NA  NA  NA
#&gt; 5  ALP  1257  7093    bota 1 fal 51.1 24.1  2.7 21.5 17.0   NA   NA NA  NA  NA
#&gt; 6  ALP  4693 10258      oc 1 fal 31.0 10.7 12.4   NA  7.4  8.9  8.0 NA  NA  NA
#&gt;   Dl HmandM3 logBd logBFd logBG logBp logBPC logBT logDd logDl logDp logDPA
#&gt; 1 NA      NA    NA     NA    NA    NA     NA    NA    NA    NA    NA     NA
#&gt; 2 NA      NA    NA     NA    NA    NA     NA    NA    NA    NA    NA     NA
#&gt; 3 NA      NA    NA     NA    NA    NA     NA    NA    NA    NA    NA     NA
#&gt; 4 NA      NA    NA     NA    NA    NA     NA    NA    NA    NA    NA     NA
#&gt; 5 NA      NA    NA     NA    NA    NA     NA    NA    NA    NA    NA     NA
#&gt; 6 NA      NA    NA     NA    NA    NA     NA    NA    NA    NA    NA     NA
#&gt;   logGB logGL logGLc logGLP logH logL logLA logLAR logLG logSD logSH logSLC
#&gt; 1    NA    NA     NA     NA   NA   NA    NA     NA    NA    NA    NA     NA
#&gt; 2    NA    NA     NA     NA   NA   NA    NA     NA    NA    NA    NA     NA
#&gt; 3    NA    NA     NA     NA   NA   NA    NA     NA    NA    NA    NA     NA
#&gt; 4    NA    NA     NA     NA   NA   NA    NA     NA    NA    NA    NA     NA
#&gt; 5    NA    NA     NA     NA   NA   NA    NA     NA    NA    NA    NA     NA
#&gt; 6    NA    NA     NA     NA   NA   NA    NA     NA    NA    NA    NA     NA
#&gt;   Width
#&gt; 1    NA
#&gt; 2    NA
#&gt; 3    NA
#&gt; 4    NA
#&gt; 5    NA
#&gt; 6    NA</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jose M Pozo, Silvia Valenzuela-Lamas.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


