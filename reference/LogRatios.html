<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Log Ratios of Measurements — LogRatios • zoolog</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Log Ratios of Measurements — LogRatios"><meta property="og:description" content="Function to compute the (base 10) log ratios of the measurements
relative to standard reference values.
The default reference and several alternative references are provided with the
package. But the user can use their own references if desired."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">zoolog</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/index.html">***zoolog***:  
 Zooarchaeological Analysis with Log-Ratios</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Log Ratios of Measurements</h1>
    
    <div class="hidden name"><code>LogRatios.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Function to compute the (base 10) log ratios of the measurements
relative to standard reference values.
The default reference and several alternative references are provided with the
package. But the user can use their own references if desired.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">LogRatios</span><span class="op">(</span>
  <span class="va">data</span>,
  ref <span class="op">=</span> <span class="va">reference</span><span class="op">$</span><span class="va">Combi</span>,
  identifiers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Taxon"</span>, <span class="st">"Element"</span><span class="op">)</span>,
  refMeasuresName <span class="op">=</span> <span class="st">"Measure"</span>,
  refValuesName <span class="op">=</span> <span class="st">"Standard"</span>,
  thesaurusSet <span class="op">=</span> <span class="va">zoologThesaurus</span>,
  taxonomy <span class="op">=</span> <span class="va">zoologTaxonomy</span>,
  joinCategories <span class="op">=</span> <span class="cn">NULL</span>,
  mergedMeasures <span class="op">=</span> <span class="cn">NULL</span>,
  useGenusIfUnambiguous <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>A dataframe with the input measurements.</p></dd>
<dt>ref</dt>
<dd><p>A dataframe including the measurement values used as references.
The default <code>ref = reference$Combi</code> and other <a href="referencesDatabase.html">reference</a> sets are
provided with the package <span class="pkg">zoolog</span>.</p></dd>
<dt>identifiers</dt>
<dd><p>A vector of column names in <code>ref</code> identifying
a type of bone. By default <code>identifiers = c("Taxon", "Element")</code>.</p></dd>
<dt>refMeasuresName</dt>
<dd><p>The column name in <code>ref</code> identifying the type of
bone measurement.</p></dd>
<dt>refValuesName</dt>
<dd><p>The column name in <code>ref</code> giving the measurement
value.</p></dd>
<dt>thesaurusSet</dt>
<dd><p>A thesaurus allowing datasets with different nomenclatures
to be merged. By default <code>thesaurusSet = <a href="zoologThesaurus.html">zoologThesaurus</a></code>.</p></dd>
<dt>taxonomy</dt>
<dd><p>A taxonomy allowing the automatic detection of data and
reference sharing the same genus (or higher taxonomic rank), although of
different species. By default <code>taxonomy = <a href="zoologTaxonomy.html">zoologTaxonomy</a></code>.</p></dd>
<dt>joinCategories</dt>
<dd><p>A list of named character vectors. Each vector is named
by a category in the reference and includes a set of categories in the data
for which to compute the log ratios with respect to that reference.
When <code>NULL</code> (default) no grouping is considered.</p></dd>
<dt>mergedMeasures</dt>
<dd><p>A list of character vectors or a single character vector.
Each vector identifies a set of measures that the data presents merged in the
same column, named as any of them. This practice only makes sense if only one
of the measures can appear in each bone element.</p></dd>
<dt>useGenusIfUnambiguous</dt>
<dd><p>Boolean. If <code>TRUE</code> (default), data cases
are matched to reference sharing the same genus, instead of sharing the same
species.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A dataframe including the input dataframe and additional columns, one
for each extracted log ratio for each relevant measurement in the reference.
The name of the added columns are constructed by prefixing each measurement by
the internal variable <code>logPrefix</code>.
If the input dataframe includes additional S3 classes (such as "tbl_df"),
they are also passed to the output.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Each log ratio is defined as the decimal logarithm of the ratio of the
variable of interest to a corresponding reference value.</p>
<p>The <code>identifiers</code> are expected to determine corresponding
columns in both data and reference. Each value in these columns identifies
the type of bone. By default this is determined by a taxon and a bone
element. For any case in the data, the log ratios are computed with respect
to the reference values in the same bone type. If the reference does not
include that bone type, the corresponding log ratios are set to <code>NA</code>.</p>
<p>The taxonomy allows the matching of data and reference by genus, instead
of by species. This is the default behaviour with
<code>useGenusIfUnambiguous = TRUE</code>, unless there is some ambiguity:
reference including more than one species for the same genus. For instance,
<code>reference$Combi</code> includes a reference for <em>Sus scrofa</em>.
If the data includes cases of <em>Sus domesticus</em>, their
log ratios will be computed with respect to the provided reference for
<em>Sus scrofa</em>.
However, a warning is given to inform the user of this assumption, and let
they know that this can be prevented by setting
<code>useGenusIfUnambiguous = FALSE</code>.</p>
<p>For some applications it can be interesting to group some set of bone types
into the same reference category to compute the log ratios. The parameter
<code>joinCategories</code> allows this grouping. <code>joinCategories</code> must be a
list of named vectors, each including the set of categories in the data
which should be mapped to the reference category given by its name.</p>
<p>This can be applied to group different species into a single
reference species. For instance <em>sheep</em>, <em>capra</em>, and doubtful
cases between both (<em>sheep/goat</em>), can be grouped and matched to the
same reference for <em>sheep</em>, by setting
<code>joinCategories = list(sheep = c("sheep", "goat", "oc"))</code>.
Indeed, the zoologTaxonomy can be used for that purpose using the function
<code><a href="Subtaxonomy.html">SubtaxonomySet</a></code> as
<code>joinCategories = list(sheep = SubtaxonomySet("Caprini"))</code>.
Similarly, <code>joinCategories</code> can be applied to group
different bone elements into a single reference (see the example below for
undetermined phalanges).</p>
<p>Note that the <code>joinCategories</code> option does not remove the distinction
between the different bone types in the data, just indicates that for any
of them the log ratios must be computed from the same reference.</p>
<p>Using the taxonomy, the presence of cases identified by higher taxonomic
ranks are also automatically detected. For instance, if some partially
identified cases have been recorded as "Ovis/Capra", this is recognized
to denote the tribe <em>Caprini</em>, which includes several possible species.
Then a warning is given informing the user of the detection of these cases
and of the option to use any of the corresponding species in the reference by
using the argument <code>joinCategories</code> (unless this has been already done).</p>
<p>There are some measures that, for most usual taxa, are restricted to a subset
of bones. For instance, for <em>Bos</em>, <em>Ovis</em>, <em>Capra</em>, and <em>Sus</em>, the measure
<em>GLl</em> is only relevant for the <em>astragalus</em>, while <em>GL</em> is not
applicable to it.
Thus, there cannot be any ambiguity between both measures since they can
be identified by the bone element. This justifies that some users have
simplified datasets where a single column records indistinctly <em>GL</em> or
<em>GLl</em>. The optional parameter <code>mergedMeasures</code> facilitates the
processing of this type of simplified dataset. For the alluded example,
<code>mergedMeasures = list(c("GL", "GLl"))</code> automatically selects, for each
bone element, the corresponding measure present in the reference.</p>
<p>Observe that if <code>mergedMeasures</code> is set to non mutually exclusive
measures, the behaviour is unpredictable.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co">## Read an example dataset:</span></span>
<span class="r-in"><span class="va">dataFile</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"dataValenzuelaLamas2008.csv.gz"</span>,</span>
<span class="r-in">                        package<span class="op">=</span><span class="st">"zoolog"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">dataExample</span> <span class="op">&lt;-</span> <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv2</a></span><span class="op">(</span><span class="va">dataFile</span>,</span>
<span class="r-in">                                na.strings <span class="op">=</span> <span class="st">""</span>,</span>
<span class="r-in">                                encoding <span class="op">=</span> <span class="st">"UTF-8"</span><span class="op">)</span></span>
<span class="r-in"><span class="co">## For illustration purposes we keep now only a subset of cases to make</span></span>
<span class="r-in"><span class="co">## the example run sufficiently fast.</span></span>
<span class="r-in"><span class="co">## Avoid this step if you want to process the full example dataset.</span></span>
<span class="r-in"><span class="va">dataExample</span> <span class="op">&lt;-</span> <span class="va">dataExample</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">400</span>, <span class="op">]</span></span>
<span class="r-in"><span class="co">## We can observe the first lines (excluding some columns for visibility):</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dataExample</span><span class="op">)</span><span class="op">[</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span><span class="op">:</span><span class="fl">20</span>,<span class="fl">32</span><span class="op">:</span><span class="fl">64</span><span class="op">)</span><span class="op">]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Site N.inv    UE Especie       Os   GL    Bp   Dp   SD   DD   Bd   Dd   BT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  ALP  4918 10364    bota    1 fal 54.0  31.3 30.6 28.1 26.3 27.5 20.0   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  ALP  4919 10364    bota    1 fal 54.5  27.9 31.8 26.0 22.8 25.3 19.5   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  ALP  3453 10410    ovar 1fal ant 27.1   9.9 12.3 17.9  9.0  9.0   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  ALP  3455 10410    ovar 1fal ant 27.6   9.6 12.2  7.6  8.9  8.3   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  ALP  4245  7036    cahi      hum   NA 128.3   NA 12.9   NA 27.4 26.6 23.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  ALP  4674 10227    cahi      hum   NA    NA   NA   NA   NA 26.0 25.7 22.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   GLc BFd Dl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  NA  NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  NA  NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  NA  NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  NA  NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  NA  NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  NA  NA NA</span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Compute the log-ratios with respect to the default reference in the</span></span>
<span class="r-in"><span class="co">## package zoolog:</span></span>
<span class="r-in"><span class="va">dataExampleWithLogs</span> <span class="op">&lt;-</span> <span class="fu">LogRatios</span><span class="op">(</span><span class="va">dataExample</span><span class="op">)</span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Reference for Sus scrofa used for cases of Sus domesticus.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>    Reference for Sus scrofa used for cases of Sus.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>    Set useGenusIfUnambiguous to FALSE if this behaviour is not desired.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Data includes some cases recorded as</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>     * Caprini (which is a Tribe)</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>       for which the reference for Ovis aries or Capra hircus could be used.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>    Set joinCategories as appropriate if you want to use any of them.</span>
<span class="r-in"><span class="co">## The output data frame include new columns with the log-ratios of the</span></span>
<span class="r-in"><span class="co">## present measurements, in both data and reference, with a "log" prefix:</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dataExampleWithLogs</span><span class="op">)</span><span class="op">[</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span><span class="op">:</span><span class="fl">20</span>,<span class="fl">32</span><span class="op">:</span><span class="fl">64</span><span class="op">)</span><span class="op">]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Site N.inv    UE Especie       Os   GL    Bp   Dp   SD   DD   Bd   Dd   BT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  ALP  4918 10364    bota    1 fal 54.0  31.3 30.6 28.1 26.3 27.5 20.0   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  ALP  4919 10364    bota    1 fal 54.5  27.9 31.8 26.0 22.8 25.3 19.5   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  ALP  3453 10410    ovar 1fal ant 27.1   9.9 12.3 17.9  9.0  9.0   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  ALP  3455 10410    ovar 1fal ant 27.6   9.6 12.2  7.6  8.9  8.3   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  ALP  4245  7036    cahi      hum   NA 128.3   NA 12.9   NA 27.4 26.6 23.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  ALP  4674 10227    cahi      hum   NA    NA   NA   NA   NA 26.0 25.7 22.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   GLc BFd Dl logGL       logBp       logDp      logSD       logBd       logDd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  NA  NA NA    NA          NA          NA         NA          NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  NA  NA NA    NA          NA          NA         NA          NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  NA  NA NA    NA -0.07991177 -0.07265930  0.2629585 -0.08911977          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  NA  NA NA    NA -0.09327573 -0.07620458 -0.1090810 -0.12428419          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  NA  NA NA    NA  0.40167955          NA -0.2116296 -0.15130497 -0.06787875</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  NA  NA NA    NA          NA          NA         NA -0.17408218 -0.08282727</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   logBT logGLc logBFd logDl logGB logSLC logGLP logBG logLG logDPA logBPC logLA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    NA     NA     NA    NA    NA     NA     NA    NA    NA     NA     NA    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    NA     NA     NA    NA    NA     NA     NA    NA    NA     NA     NA    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    NA     NA     NA    NA    NA     NA     NA    NA    NA     NA     NA    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    NA     NA     NA    NA    NA     NA     NA    NA    NA     NA     NA    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    NA     NA     NA    NA    NA     NA     NA    NA    NA     NA     NA    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    NA     NA     NA    NA    NA     NA     NA    NA    NA     NA     NA    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   logLAR logSH logSB logL logH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     NA    NA    NA   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     NA    NA    NA   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     NA    NA    NA   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     NA    NA    NA   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     NA    NA    NA   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     NA    NA    NA   NA   NA</span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Compute the log-ratios with respect to a different reference:</span></span>
<span class="r-in"><span class="va">dataExampleWithLogs2</span> <span class="op">&lt;-</span> <span class="fu">LogRatios</span><span class="op">(</span><span class="va">dataExample</span>, ref <span class="op">=</span> <span class="va">reference</span><span class="op">$</span><span class="va">Basel</span><span class="op">)</span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Reference for Ovis orientalis used for cases of Ovis aries.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>    Reference for Sus scrofa used for cases of Sus domesticus.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>    Reference for Sus scrofa used for cases of Sus.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>    Set useGenusIfUnambiguous to FALSE if this behaviour is not desired.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Data includes some cases recorded as</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>     * Caprini (which is a Tribe)</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>       for which the reference for Ovis orientalis or Capra hircus could be used.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>    Set joinCategories as appropriate if you want to use any of them.</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dataExampleWithLogs2</span><span class="op">)</span><span class="op">[</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span><span class="op">:</span><span class="fl">20</span>,<span class="fl">32</span><span class="op">:</span><span class="fl">64</span><span class="op">)</span><span class="op">]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Site N.inv    UE Especie       Os   GL    Bp   Dp   SD   DD   Bd   Dd   BT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  ALP  4918 10364    bota    1 fal 54.0  31.3 30.6 28.1 26.3 27.5 20.0   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  ALP  4919 10364    bota    1 fal 54.5  27.9 31.8 26.0 22.8 25.3 19.5   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  ALP  3453 10410    ovar 1fal ant 27.1   9.9 12.3 17.9  9.0  9.0   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  ALP  3455 10410    ovar 1fal ant 27.6   9.6 12.2  7.6  8.9  8.3   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  ALP  4245  7036    cahi      hum   NA 128.3   NA 12.9   NA 27.4 26.6 23.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  ALP  4674 10227    cahi      hum   NA    NA   NA   NA   NA 26.0 25.7 22.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   GLc BFd Dl logGL logBp      logSD logDD       logBd      logBT logBFd logDl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  NA  NA NA    NA    NA         NA    NA          NA         NA     NA    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  NA  NA NA    NA    NA         NA    NA          NA         NA     NA    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  NA  NA NA    NA    NA         NA    NA          NA         NA     NA    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  NA  NA NA    NA    NA         NA    NA          NA         NA     NA    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  NA  NA NA    NA    NA -0.2064284    NA -0.09308922 -0.1260874     NA    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  NA  NA NA    NA    NA         NA    NA -0.11586643 -0.1506945     NA    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   logGB logSLC logGLP logBG logLG logDPA logBPC logLA logLAR logSH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    NA     NA     NA    NA    NA     NA     NA    NA     NA    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    NA     NA     NA    NA    NA     NA     NA    NA     NA    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    NA     NA     NA    NA    NA     NA     NA    NA     NA    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    NA     NA     NA    NA    NA     NA     NA    NA     NA    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    NA     NA     NA    NA    NA     NA     NA    NA     NA    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    NA     NA     NA    NA    NA     NA     NA    NA     NA    NA</span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Define an altenative reference combining differently the references'</span></span>
<span class="r-in"><span class="co">## database:</span></span>
<span class="r-in"><span class="va">refComb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cattle <span class="op">=</span> <span class="st">"Nieto"</span>, sheep <span class="op">=</span> <span class="st">"Davis"</span>, Goat <span class="op">=</span> <span class="st">"Clutton"</span>,</span>
<span class="r-in">                pig <span class="op">=</span> <span class="st">"Albarella"</span>, redDeer <span class="op">=</span> <span class="st">"Basel"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">userReference</span> <span class="op">&lt;-</span> <span class="fu"><a href="AssembleReference.html">AssembleReference</a></span><span class="op">(</span><span class="va">refComb</span><span class="op">)</span></span>
<span class="r-in"><span class="co">## Compute the log-ratios with respect to this alternative reference:</span></span>
<span class="r-in"><span class="va">dataExampleWithLogs3</span> <span class="op">&lt;-</span> <span class="fu">LogRatios</span><span class="op">(</span><span class="va">dataExample</span>, ref <span class="op">=</span> <span class="va">userReference</span><span class="op">)</span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Reference for Sus domesticus used for cases of Sus.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>    Set useGenusIfUnambiguous to FALSE if this behaviour is not desired.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Data includes some cases recorded as</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>     * Caprini (which is a Tribe)</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>       for which the reference for Ovis aries or Capra hircus could be used.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>    Set joinCategories as appropriate if you want to use any of them.</span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## We can be interested in including the first and second phalanges without</span></span>
<span class="r-in"><span class="co">## anterior-posterior identification ("phal 1" and "phal 2"), by computing</span></span>
<span class="r-in"><span class="co">## their log ratios with respect to the reference of the corresponding</span></span>
<span class="r-in"><span class="co">## anterior phalanges ("phal 1 ant" and "phal 2 ant", respectively).</span></span>
<span class="r-in"><span class="co">## For this we use the optional argument joinCategories:</span></span>
<span class="r-in"><span class="va">categoriesPhalAnt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'phal 1 ant'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"phal 1 ant"</span>, <span class="st">"phal 1"</span><span class="op">)</span>,</span>
<span class="r-in">                          <span class="st">'phal 2 ant'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"phal 2 ant"</span>, <span class="st">"phal 2"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">dataExampleWithLogs4</span> <span class="op">&lt;-</span> <span class="fu">LogRatios</span><span class="op">(</span><span class="va">dataExample</span>,</span>
<span class="r-in">                                  joinCategories <span class="op">=</span> <span class="va">categoriesPhalAnt</span><span class="op">)</span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Reference for Sus scrofa used for cases of Sus domesticus.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>    Reference for Sus scrofa used for cases of Sus.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>    Set useGenusIfUnambiguous to FALSE if this behaviour is not desired.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Data includes some cases recorded as</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>     * Caprini (which is a Tribe)</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>       for which the reference for Ovis aries or Capra hircus could be used.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>    Set joinCategories as appropriate if you want to use any of them.</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dataExampleWithLogs4</span><span class="op">)</span><span class="op">[</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span><span class="op">:</span><span class="fl">20</span>,<span class="fl">32</span><span class="op">:</span><span class="fl">64</span><span class="op">)</span><span class="op">]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Site N.inv    UE Especie       Os   GL    Bp   Dp   SD   DD   Bd   Dd   BT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  ALP  4918 10364    bota    1 fal 54.0  31.3 30.6 28.1 26.3 27.5 20.0   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  ALP  4919 10364    bota    1 fal 54.5  27.9 31.8 26.0 22.8 25.3 19.5   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  ALP  3453 10410    ovar 1fal ant 27.1   9.9 12.3 17.9  9.0  9.0   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  ALP  3455 10410    ovar 1fal ant 27.6   9.6 12.2  7.6  8.9  8.3   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  ALP  4245  7036    cahi      hum   NA 128.3   NA 12.9   NA 27.4 26.6 23.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  ALP  4674 10227    cahi      hum   NA    NA   NA   NA   NA 26.0 25.7 22.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   GLc BFd Dl logGL        logBp        logDp       logSD       logBd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  NA  NA NA    NA  0.048386306  0.008600172  0.08697848  0.02435935</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  NA  NA NA    NA -0.001553828  0.025305865  0.05324551 -0.01185283</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  NA  NA NA    NA -0.079911767 -0.072659295  0.26295847 -0.08911977</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  NA  NA NA    NA -0.093275728 -0.076204576 -0.10908097 -0.12428419</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  NA  NA NA    NA  0.401679554           NA -0.21162958 -0.15130497</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  NA  NA NA    NA           NA           NA          NA -0.17408218</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          logDd logBT logGLc logBFd logDl logGB logSLC logGLP logBG logLG logDPA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -0.006466042    NA     NA     NA    NA    NA     NA     NA    NA    NA     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 -0.017461427    NA     NA     NA    NA    NA     NA     NA    NA    NA     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           NA    NA     NA     NA    NA    NA     NA     NA    NA    NA     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           NA    NA     NA     NA    NA    NA     NA     NA    NA    NA     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 -0.067878752    NA     NA     NA    NA    NA     NA     NA    NA    NA     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 -0.082827266    NA     NA     NA    NA    NA     NA     NA    NA    NA     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   logBPC logLA logLAR logSH logSB logL logH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     NA    NA     NA    NA    NA   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     NA    NA     NA    NA    NA   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     NA    NA     NA    NA    NA   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     NA    NA     NA    NA    NA   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     NA    NA     NA    NA    NA   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     NA    NA     NA    NA    NA   NA   NA</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jose M Pozo, Angela Trentacoste, Ariadna Nieto-Espinet, Silvia Guimarães Chiarelli, Silvia Valenzuela-Lamas.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer></div>

  


  

  </body></html>

